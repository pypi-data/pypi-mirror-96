{"version":3,"sources":["listView.es6.js"],"names":[],"mappings":"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","file":"listView.js","sourcesContent":["/**\n * Display a list of items.\n *\n * This will render each item in a list, and update that list when the\n * items in the collection changes.\n *\n * It can also filter the displayed list of items.\n *\n * If loading the list through the API, this will display a loading indicator\n * until the items have been loaded.\n *\n * If 'options.animateItems' is true, then newly added or removed items will\n * be faded in/out.\n */\nDjblets.Config.ListView = Backbone.View.extend({\n    tagName: 'ul',\n    className: 'djblets-c-config-forms-list',\n    defaultItemView: Djblets.Config.ListItemView,\n\n    /**\n     * Initialize the view.\n     *\n     * Args:\n     *     options (object, optional):\n     *         The view options.\n     *\n     * Option Args:\n     *     ItemView (object):\n     *         The item view class to use. This argument defaults to\n     *         :js:attr:`defaultItemView`.\n     *\n     *     animateItems (boolean):\n     *         Whether or not items should be animated. This argument\n     *         defaults to ``false``.\n     */\n    initialize(options={}) {\n        const collection = this.model.collection;\n\n        this.ItemView = options.ItemView || this.defaultItemView;\n        this.views = [];\n        this.animateItems = !!options.animateItems;\n\n        this.once('rendered', () => {\n            this.listenTo(collection, 'add', this._addItem);\n            this.listenTo(collection, 'remove', this._removeItem);\n            this.listenTo(collection, 'reset', this._renderItems);\n        });\n    },\n\n    /**\n     * Return the body element.\n     *\n     * This can be overridden by subclasses if the list items should be\n     * rendered to a child element of this view.\n     *\n     * Returns:\n     *     jQuery:\n     *     Where the list view should be rendered.\n     */\n    getBody() {\n        return this.$el;\n    },\n\n    /**\n     * Render the list of items.\n     *\n     * This will loop through all items and render each one.\n     *\n     * Returns:\n     *     Djblets.Config.ListView:\n     *     This view.\n     */\n    render() {\n        this.$listBody = this.getBody();\n\n        this._renderItems();\n        this.trigger('rendered');\n\n        return this;\n    },\n\n    /**\n     * Create a view for an item and adds it.\n     *\n     * Args:\n     *     item (Backbone.Model):\n     *         The model to add.\n     *\n     *     collection (Backbone.Collection):\n     *         Ignored.\n     *\n     *     options (object, optional):\n     *         Options for adding the item.\n     *\n     * Option Args:\n     *     animate (boolean):\n     *         Whether or not to animate adding the item. This argument defaults\n     *         to ``true``.\n     */\n    _addItem(item, collection, options={}) {\n        const animateItem = (options.animate !== false);\n        const view = new this.ItemView({\n            model: item\n        });\n\n        view.render();\n\n        /*\n         * If this ListView has animation enabled, and this specific\n         * item is being animated (the default unless options.animate\n         * is false), we'll fade in the item.\n         */\n        if (this.animateItems && animateItem) {\n            view.$el.fadeIn();\n        }\n\n        this.$listBody.append(view.$el);\n        this.views.push(view);\n    },\n\n    /**\n     * Handle an item being removed from the collection.\n     *\n     * Removes the element from the list.\n     *\n     * Args:\n     *     item (Backbone.Model):\n     *         The model to remove.\n     *\n     *     collection (Backbone.Collection):\n     *         Ignored.\n     *\n     *     options (object, optional):\n     *         Options for removing the element.\n     *\n     * Option Args:\n     *     animate (boolean):\n     *         Whether or not the removal should be animated. This defaults\n     *         to ``true``.\n     */\n    _removeItem(item, collection, options={}) {\n        const animateItem = (options.animate !== false);\n        const view = _.find(this.views, view => view.model === item);\n\n        if (view) {\n            this.views = _.without(this.views, view);\n\n            /*\n             * If this ListView has animation enabled, and this specific\n             * item is being animated (the default unless options.animate\n             * is false), we'll fade out the item.\n             */\n            if (this.animateItems && animateItem) {\n                view.$el.fadeOut(function() {\n                    view.remove();\n                });\n            } else {\n                view.remove();\n            }\n        }\n    },\n\n    /**\n     * Render all items from the list.\n     */\n    _renderItems() {\n        this.views.forEach(function(view) {\n            view.remove();\n        });\n        this.views = [];\n        this.$listBody.empty();\n\n        this.model.collection.each(item => {\n            this._addItem(item, item.collection, {\n                animate: false\n            });\n        });\n    },\n});\n"]}