{"version":3,"sources":["integrationConfigListViewTests.es6.js"],"names":[],"mappings":"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","file":"integrationConfigListViewTests.js","sourcesContent":["suite('djblets/integrations/views/IntegrationConfigListView', function() {\n    const template = _.template(dedent`\n        <div class=\"djblets-c-integration-configs\">\n         <div class=\"djblets-l-config-forms-container\">\n          <table class=\"djblets-c-config-forms-list\"></table>\n         </div>\n        </div>\n    `);\n    let collection;\n    let view;\n\n    beforeEach(function() {\n        const $el = $(template()).appendTo($testsScratch);\n\n        view = new Djblets.IntegrationConfigListView({\n            el: $el,\n            configs: [\n                {\n                    'editURL' : 'configs/1/',\n                    'enabled': true,\n                    'id': 1,\n                    'integrationID': 'int1',\n                    'name': 'Config 1',\n                },\n                {\n                    'editURL' : 'configs/2/',\n                    'enabled': true,\n                    'id': 2,\n                    'integrationID': 'int2',\n                    'name': 'Config 2',\n                },\n                {\n                    'editURL' : 'configs/3/',\n                    'enabled': false,\n                    'id': 3,\n                    'integrationID': 'int3',\n                    'name': 'Config 3',\n                },\n                {\n                    'editURL' : 'configs/4/',\n                    'enabled': true,\n                    'id': 4,\n                    'integrationID': 'int1',\n                    'name': 'Config 4',\n                },\n            ],\n            integrationIDs: ['int1', 'int2', 'int3'],\n            integrationsMap: {\n                int1: {\n                    'addURL': 'int1/add/',\n                    'description': 'Int1 Description',\n                    'iconSrc': 'data:test,int1',\n                    'iconSrcSet': 'data:test,int1 1x, data:test,int1@2x 2x',\n                    'id': 'int1',\n                    'name': 'Int1',\n                },\n                int2: {\n                    'addURL': 'int2/add/',\n                    'description': 'Int2 Description',\n                    'iconSrc': 'data:test,int2',\n                    'iconSrcSet': 'data:test,int2 1x, data:test,int2@2x 2x',\n                    'id': 'int2',\n                    'name': 'Int2',\n                },\n                int3: {\n                    'addURL': 'int3/add/',\n                    'description': 'Int3 Description',\n                    'iconSrc': 'data:test,int3',\n                    'iconSrcSet': 'data:test,int3 1x, data:test,int3@2x 2x',\n                    'id': 'int3',\n                    'name': 'Int3',\n                },\n            },\n        });\n        view.render();\n\n        collection = view.list.collection;\n    });\n\n    describe('Configurations', function() {\n        let $row1;\n        let $row2;\n        let $row3;\n        let $row4;\n\n        beforeEach(function() {\n            const $rows = view.listView.$('tr');\n            expect($rows.length).toBe(4);\n\n            $row1 = $rows.eq(0);\n            $row2 = $rows.eq(1);\n            $row3 = $rows.eq(2);\n            $row4 = $rows.eq(3);\n        });\n\n        describe('Rendering', function() {\n            it('Icon', function() {\n                const $icon1 =\n                    $row1.find('.djblets-c-integration-config__name img');\n                const $icon2 =\n                    $row2.find('.djblets-c-integration-config__name img');\n                const $icon3 =\n                    $row3.find('.djblets-c-integration-config__name img');\n                const $icon4 =\n                    $row4.find('.djblets-c-integration-config__name img');\n\n                expect($icon1.attr('src')).toBe('data:test,int1');\n                expect($icon2.attr('src')).toBe('data:test,int2');\n                expect($icon3.attr('src')).toBe('data:test,int3');\n                expect($icon4.attr('src')).toBe('data:test,int1');\n\n                expect($icon1.attr('srcset'))\n                    .toBe('data:test,int1 1x, data:test,int1@2x 2x');\n                expect($icon2.attr('srcset'))\n                    .toBe('data:test,int2 1x, data:test,int2@2x 2x');\n                expect($icon3.attr('srcset'))\n                    .toBe('data:test,int3 1x, data:test,int3@2x 2x');\n                expect($icon4.attr('srcset'))\n                    .toBe('data:test,int1 1x, data:test,int1@2x 2x');\n            });\n\n            it('Name', function() {\n                const $name1 =\n                    $row1.find('.djblets-c-integration-config__name a');\n                const $name2 =\n                    $row2.find('.djblets-c-integration-config__name a');\n                const $name3 =\n                    $row3.find('.djblets-c-integration-config__name a');\n                const $name4 =\n                    $row4.find('.djblets-c-integration-config__name a');\n\n                expect($name1.text()).toBe('Config 1');\n                expect($name2.text()).toBe('Config 2');\n                expect($name3.text()).toBe('Config 3');\n                expect($name4.text()).toBe('Config 4');\n\n                expect($name1.attr('href')).toBe('configs/1/');\n                expect($name2.attr('href')).toBe('configs/2/');\n                expect($name3.attr('href')).toBe('configs/3/');\n                expect($name4.attr('href')).toBe('configs/4/');\n            });\n\n            it('Integration name', function() {\n                const $intName1 = $row1.find(\n                    '.djblets-c-integration-config__integration-name');\n                const $intName2 = $row2.find(\n                    '.djblets-c-integration-config__integration-name');\n                const $intName3 = $row3.find(\n                    '.djblets-c-integration-config__integration-name');\n                const $intName4 = $row4.find(\n                    '.djblets-c-integration-config__integration-name');\n\n                expect($intName1.text().trim()).toBe('Int1');\n                expect($intName2.text().trim()).toBe('Int2');\n                expect($intName3.text().trim()).toBe('Int3');\n                expect($intName4.text().trim()).toBe('Int1');\n            });\n\n            it('Status', function() {\n                expect($row1.hasClass('-is-enabled')).toBe(true);\n                expect($row2.hasClass('-is-enabled')).toBe(true);\n                expect($row3.hasClass('-is-enabled')).toBe(false);\n                expect($row4.hasClass('-is-enabled')).toBe(true);\n\n                expect($row1.hasClass('-is-disabled')).toBe(false);\n                expect($row2.hasClass('-is-disabled')).toBe(false);\n                expect($row3.hasClass('-is-disabled')).toBe(true);\n                expect($row4.hasClass('-is-disabled')).toBe(false);\n\n                expect(\n                    $row1.find('.djblets-c-config-forms-list__item-state')\n                    .text()\n                ).toBe('Enabled');\n\n                expect(\n                    $row2.find('.djblets-c-config-forms-list__item-state')\n                    .text()\n                ).toBe('Enabled');\n\n                expect(\n                    $row3.find('.djblets-c-config-forms-list__item-state')\n                    .text()\n                ).toBe('Disabled');\n\n                expect(\n                    $row4.find('.djblets-c-config-forms-list__item-state')\n                    .text()\n                ).toBe('Enabled');\n            });\n        });\n\n        describe('Actions', function() {\n            it('Delete', function() {\n                const config = collection.at(0);\n\n                spyOn(config, 'destroy').and.callThrough();\n                spyOn(config, 'sync');\n\n                spyOn($.fn, 'modalBox').and.callFake(\n                    options => options.buttons[1].click());\n\n                $row1.find('.config-forms-list-action-delete').click();\n\n                expect($.fn.modalBox).toHaveBeenCalled();\n                expect(config.destroy).toHaveBeenCalled();\n\n                expect(collection.length).toBe(3);\n                expect(view.listView.$('tr').length).toBe(3);\n            });\n        });\n    });\n});\n"]}