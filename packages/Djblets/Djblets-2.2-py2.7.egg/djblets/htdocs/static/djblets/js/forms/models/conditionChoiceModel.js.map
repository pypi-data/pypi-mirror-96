{"version":3,"sources":["conditionChoiceModel.es6.js"],"names":[],"mappings":";;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA,QAAQ,KAAR,CAAc,eAAd,GAAgC,SAAS,KAAT,CAAe,MAAf,CAAsB;AAClD,cAAU;AACN,cAAM,IADA;AAEN,oBAAY;AAFN,KADwC;;AAMlD;;;;;;;AAOA,cAbkD,sBAavC,UAbuC,EAa3B;AACnB,aAAK,SAAL,GAAiB,IAAI,SAAS,UAAb,CAAwB,WAAW,SAAnC,EAA8C;AAC3D,mBAAO,QAAQ,KAAR,CAAc,iBADsC;AAE3D,mBAAO;AAFoD,SAA9C,CAAjB;AAIH,KAlBiD;;;AAoBlD;;;;;;;;;;;;;;AAcA,oBAlCkD,4BAkCjC,SAlCiC,EAkCtB;AACxB,YAAM,aAAa,KAAK,GAAL,CAAS,YAAT,CAAnB;;AAEA,eAAO,IAAI,WAAW,SAAf,CAAyB,EAAE,QAAF,CAAW;AACvC,mBAAO,IAAI,WAAW,UAAf,CAA0B,EAAE,QAAF,CAAW;AACxC,2BAAW;AAD6B,aAAX,EAE9B,WAAW,SAFmB,CAA1B;AADgC,SAAX,EAI7B,WAAW,QAJkB,CAAzB,CAAP;AAKH,KA1CiD;;;AA4ClD;;;;;;;;;;;AAWA,SAvDkD,iBAuD5C,IAvD4C,EAuDtC;AACR,eAAO;AACH,gBAAI,KAAK,EADN;AAEH,kBAAM,KAAK,IAFR;AAGH,wBAAY,QAAQ,KAAR,CAAc,eAAd,CAA8B,mBAA9B,CACR,KAAK,UADG;AAHT,SAAP;AAMH;AA9DiD,CAAtB,EA+D7B;AACC;;;;;;;;;;;;;;;AAeA,uBAhBD,+BAgBqB,IAhBrB,EAgB2B;AACtB,YAAI,aAAa,IAAjB;;AAEA,YAAI,SAAS,SAAb,EAAwB;AACpB,gBAAM,iBAAiB,KAAK,KAA5B;AACA,gBAAM,gBAAgB,KAAK,IAA3B;;AAEA,yBAAa;AACT,4BAAY,QAAQ,eAAR,CAAwB,eAAe,SAAvC,CADH;AAET,2BAAW,eAAe,IAFjB;AAGT,2BAAW,QAAQ,eAAR,CAAwB,cAAc,SAAtC,CAHF;AAIT,0BAAU,cAAc;AAJf,aAAb;AAMH;;AAED,eAAO,UAAP;AACH;AAhCF,CA/D6B,CAAhC","file":"conditionChoiceModel.js","sourcesContent":["/**\n * A possible choice for a condition.\n *\n * This represents a single choice for a condition, such as a summary or list of\n * objects, that a condition processor will inspect and match against\n * configurations. A condition contains a list of possible operators (such as\n * \"Is,\" \"Is not,\" \"Starts with,\" etc.) and a field for handling any values\n * for the choice and operator.\n *\n * Attributes:\n *     operators (Backbone.Collection):\n *         A collection of operators that are valid for this condition. Each\n *         entry is a :js:class:`Djblets.Forms.ConditionOperator`.\n *\n * Model Attributes:\n *     name (string):\n *         The name of the condition. This is what will be displayed to the\n *         user.\n *\n *     valueField (object):\n *         Information about the object handling the storage and manipulation\n *         of values for the condition. This will be the default value field\n *         for all operators on the choice, but operators can provide their own.\n *\n *         This will have ``modelClass` and ``viewClass`` keys pointing to the\n *         object constructors for the model and view for the value field,\n *         along with ``modelData`` and ``viewData`` controlling the model\n *         attributes and view options, respectively.\n */\nDjblets.Forms.ConditionChoice = Backbone.Model.extend({\n    defaults: {\n        name: null,\n        valueField: null\n    },\n\n    /**\n     * Initialize the choice.\n     *\n     * Attributes:\n     *     operators (Array):\n     *         The list of operators to populate the operators collection.\n     */\n    initialize(attributes) {\n        this.operators = new Backbone.Collection(attributes.operators, {\n            model: Djblets.Forms.ConditionOperator,\n            parse: true\n        });\n    },\n\n    /**\n     * Create the value field for the choice.\n     *\n     * This will construct a new instance of the view used to take values for\n     * this choice.\n     *\n     * Args:\n     *     fieldName (string):\n     *         The name for the form field.\n     *\n     * Returns:\n     *     Djblets.Forms.BaseConditionValueFieldView:\n     *     The view for the field.\n     */\n    createValueField(fieldName) {\n        const valueField = this.get('valueField');\n\n        return new valueField.viewClass(_.defaults({\n            model: new valueField.modelClass(_.defaults({\n                fieldName: fieldName\n            }, valueField.modelData))\n        }, valueField.viewData));\n    },\n\n    /**\n     * Parse the attribute data passed to the model.\n     *\n     * Args:\n     *     data (object):\n     *         The attribute data passed to the model.\n     *\n     *  Returns:\n     *     object:\n     *     The parsed attributes.\n     */\n    parse(data) {\n        return {\n            id: data.id,\n            name: data.name,\n            valueField: Djblets.Forms.ConditionChoice.parseValueFieldData(\n                data.valueField)\n        };\n    }\n}, {\n    /**\n     * Parse value field data into a standard structure.\n     *\n     * This can be used by any choice-related class that needs to deal with\n     * value fields. It's intended for internal use only.\n     *\n     * Args:\n     *     data (object):\n     *         The value field data to parse.\n     *\n     * Returns:\n     *     dict:\n     *     The resulting value field information, or ``null`` if the data\n     *     provided is ``undefined``.\n     */\n    parseValueFieldData(data) {\n        let valueField = null;\n\n        if (data !== undefined) {\n            const fieldModelInfo = data.model;\n            const fieldViewInfo = data.view;\n\n            valueField = {\n                modelClass: Djblets.getObjectByName(fieldModelInfo.className),\n                modelData: fieldModelInfo.data,\n                viewClass: Djblets.getObjectByName(fieldViewInfo.className),\n                viewData: fieldViewInfo.data\n            };\n        }\n\n        return valueField;\n    }\n});\n"]}