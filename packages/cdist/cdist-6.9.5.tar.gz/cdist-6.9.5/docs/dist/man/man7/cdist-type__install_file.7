.\" Man page generated from reStructuredText.
.
.TH "CDIST-TYPE__INSTALL_FILE" "7" "Feb 28, 2021" "6.9.5" "cdist"
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH NAME
.sp
cdist\-type__install_file \- Manage files with install command.
.SH DESCRIPTION
.sp
This cdist type allows you to create files, remove files and set file
attributes on the target.
.sp
If the file already exists on the target, then if it is a:
.INDENT 0.0
.TP
.B regular file, and state is:
.INDENT 7.0
.TP
.B present
replace it with the source file if they are not equal
.TP
.B exists
do nothing
.UNINDENT
.TP
.B symlink
replace it with the source file
.TP
.B directory
replace it with the source file
.UNINDENT
.sp
One exception is that when state is pre\-exists, an error is raised if
the file would have been created otherwise (e.g. it is not present or
not a regular file).
.sp
In any case, make sure that the file attributes are as specified.
.SH REQUIRED PARAMETERS
.sp
None.
.SH OPTIONAL PARAMETERS
.INDENT 0.0
.TP
.B state
\(aqpresent\(aq, \(aqabsent\(aq, \(aqexists\(aq or \(aqpre\-exists\(aq, defaults to \(aqpresent\(aq where:
.INDENT 7.0
.TP
.B present
the file is exactly the one from source
.TP
.B absent
the file does not exist
.TP
.B exists
the file from source but only if it doesn\(aqt already exist
.TP
.B pre\-exists
check that the file exists and is a regular file, but do not
create or modify it
.UNINDENT
.TP
.B group
Group to chgrp to.
.TP
.B mode
Unix permissions, suitable for chmod.
.TP
.B owner
User to chown to.
.TP
.B source
If supplied, copy this file from the host running cdist to the target.
If not supplied, an empty file or directory will be created.
If source is \(aq\-\(aq (dash), take what was written to stdin as the file content.
.TP
.B onchange
The code to run if file is modified.
.UNINDENT
.SH MESSAGES
.INDENT 0.0
.TP
.B chgrp <group>
Changed group membership
.TP
.B chown <owner>
Changed owner
.TP
.B chmod <mode>
Changed mode
.TP
.B create
Empty file was created (no \-\-source specified)
.TP
.B remove
File exists, but state is absent, file will be removed by generated code.
.TP
.B upload
File was uploaded
.UNINDENT
.SH EXAMPLES
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
# Create  /etc/cdist\-configured as an empty file
__install_file /etc/cdist\-configured
# The same thing
__install_file /etc/cdist\-configured \-\-state present
# Use __file from another type
__install_file /etc/issue \-\-source "$__type/files/archlinux" \-\-state present
# Delete existing file
__install_file /etc/cdist\-configured \-\-state absent
# Supply some more settings
__install_file /etc/shadow \-\-source "$__type/files/shadow" \e
   \-\-owner root \-\-group shadow \-\-mode 0640 \e
   \-\-state present
# Provide a default file, but let the user change it
__install_file /home/frodo/.bashrc \-\-source "/etc/skel/.bashrc" \e
   \-\-state exists \e
   \-\-owner frodo \-\-mode 0600
# Check that the file is present, show an error when it is not
__install_file /etc/somefile \-\-state pre\-exists
# Take file content from stdin
__install_file /tmp/whatever \-\-owner root \-\-group root \-\-mode 644 \-\-source \- << DONE
    Here goes the content for /tmp/whatever
DONE
.ft P
.fi
.UNINDENT
.UNINDENT
.SH AUTHORS
.sp
Nico Schottelius <\fI\%nico\-cdist\-\-@\-\-schottelius.org\fP>
.SH COPYING
.sp
Copyright (C) 2011\-2013 Nico Schottelius. You can redistribute it
and/or modify it under the terms of the GNU General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.
.SH COPYRIGHT
ungleich GmbH 2020
.\" Generated by docutils manpage writer.
.
