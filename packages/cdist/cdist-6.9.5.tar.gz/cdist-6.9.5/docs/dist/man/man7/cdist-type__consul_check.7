.\" Man page generated from reStructuredText.
.
.TH "CDIST-TYPE__CONSUL_CHECK" "7" "Feb 28, 2021" "6.9.5" "cdist"
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH NAME
.sp
cdist\-type__consul_check \- Manages consul checks
.SH DESCRIPTION
.sp
Generate and deploy check definitions for a consul agent.
See \fI\%http://www.consul.io/docs/agent/checks.html\fP for parameter documentation.
.sp
Use either script together with interval, or use ttl.
.SH REQUIRED PARAMETERS
.sp
None.
.SH OPTIONAL PARAMETERS
.INDENT 0.0
.TP
.B docker\-container\-id
the id of the docker container to run
.TP
.B http
the url to check
.TP
.B id
The id of this check.
.TP
.B interval
the interval in which the check should run
.TP
.B name
The name of this check. Defaults to __object_id
.TP
.B notes
human readable description
.TP
.B script
the shell command to run
.TP
.B service\-id
the id of the service this check is bound to
.TP
.B shell
the shell to run inside the docker container
.TP
.B state
if this check is \(aqpresent\(aq or \(aqabsent\(aq. Defaults to \(aqpresent\(aq.
.TP
.B status
specify the initial state of this health check
.TP
.B tcp
the host and port to check
.TP
.B timeout
after how long to timeout checks which take to long
.TP
.B token
ACL token to use for interacting with the catalog
.TP
.B ttl
how long a TTL check is considered healthy without being updated through the
HTTP interface
.UNINDENT
.SH EXAMPLES
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
__consul_check redis \e
   \-\-script /usr/local/bin/check_redis.py \e
   \-\-interval 10s

__consul_check some\-object\-id \e
   \-\-id web\-app \e
   \-\-name "Web App Status" \e
   \-\-notes "Web app does a curl internally every 10 seconds" \e
   \-\-ttl 30s
.ft P
.fi
.UNINDENT
.UNINDENT
.SH SEE ALSO
.sp
\fBcdist\-type__consul_agent\fP(7)
.SH AUTHORS
.sp
Steven Armstrong <\fI\%steven\-cdist\-\-@\-\-armstrong.cc\fP>
.SH COPYING
.sp
Copyright (C) 2015\-2016 Steven Armstrong. You can redistribute it
and/or modify it under the terms of the GNU General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.
.SH COPYRIGHT
ungleich GmbH 2020
.\" Generated by docutils manpage writer.
.
