.\" Man page generated from reStructuredText.
.
.TH "CDIST-TYPE__KEY_VALUE" "7" "Feb 28, 2021" "6.9.5" "cdist"
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH NAME
.sp
cdist\-type__key_value \- Change property values in files
.SH DESCRIPTION
.sp
This cdist type allows you to change values in a key value based config
file.
.SH REQUIRED PARAMETERS
.INDENT 0.0
.TP
.B file
The file to operate on.
.TP
.B delimiter
The delimiter which separates the key from the value.
.UNINDENT
.SH OPTIONAL PARAMETERS
.INDENT 0.0
.TP
.B state
present or absent, defaults to present. If present, sets the key to value,
if absent, removes the key from the file.
.TP
.B key
The key to change. Defaults to object_id.
.TP
.B value
The value for the key. Optional if state=absent, required otherwise.
.TP
.B comment
If supplied, the value will be inserted before the line with the key,
but only if the key or value must be changed.
You need to ensure yourself that the line is prefixed with the correct
comment sign. (for example # or ; or wathever ..)
.TP
.B onchange
The code to run if the key or value changes (i.e. is inserted, removed or replaced).
.UNINDENT
.SH BOOLEAN PARAMETERS
.INDENT 0.0
.TP
.B exact_delimiter
If supplied, treat additional whitespaces between key, delimiter and value
as wrong value.
.UNINDENT
.SH MESSAGES
.INDENT 0.0
.TP
.B remove
Removed existing key and value
.TP
.B insert
Added key and value
.TP
.B change
Changed value of existing key
.TP
.B create
A new line was inserted in a new file
.UNINDENT
.SH EXAMPLES
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
# Set the maximum system user id
__key_value SYS_UID_MAX \-\-file /etc/login.defs \-\-value 666 \-\-delimiter \(aq \(aq

# Same with fancy id
__key_value my\-fancy\-id \-\-file /etc/login.defs \-\-key SYS_UID_MAX \-\-value 666 \e
   \-\-delimiter \(aq \(aq

# Enable packet forwarding
__key_value net.ipv4.ip_forward \-\-file /etc/sysctl.conf \-\-value 1 \e
   \-\-delimiter \(aq = \(aq \-\-comment \(aq# my linux kernel should act as a router\(aq

# Remove existing key/value
__key_value LEGACY_KEY \-\-file /etc/somefile \-\-state absent \-\-delimiter \(aq=\(aq
.ft P
.fi
.UNINDENT
.UNINDENT
.SH MORE INFORMATION
.sp
This type try to handle as many values as possible, so it doesn\(aqt use regexes.
So you need to exactly specify the key and delimiter. Delimiter can be of any length.
.SH AUTHORS
.sp
Steven Armstrong <\fI\%steven\-cdist\-\-@\-\-armstrong.cc\fP>
.SH COPYING
.sp
Copyright (C) 2011 Steven Armstrong. You can redistribute it
and/or modify it under the terms of the GNU General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.
.SH COPYRIGHT
ungleich GmbH 2020
.\" Generated by docutils manpage writer.
.
