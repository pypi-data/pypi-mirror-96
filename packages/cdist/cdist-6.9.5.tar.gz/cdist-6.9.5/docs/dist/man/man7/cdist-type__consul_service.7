.\" Man page generated from reStructuredText.
.
.TH "CDIST-TYPE__CONSUL_SERVICE" "7" "Feb 28, 2021" "6.9.5" "cdist"
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH NAME
.sp
cdist\-type__consul_service \- Manages consul services
.SH DESCRIPTION
.sp
Generate and deploy service definitions for a consul agent.
See \fI\%http://www.consul.io/docs/agent/services.html\fP for parameter documentation.
.sp
Use either script together with interval, or use ttl.
.SH REQUIRED PARAMETERS
.sp
None.
.SH OPTIONAL PARAMETERS
.INDENT 0.0
.TP
.B check\-interval
the interval in which the script given with \-\-check\-script should be run
.TP
.B check\-http
the URL to check for HTTP 200\-ish status every \-\-check\-interval
.TP
.B check\-script
the shell command to run every \-\-check\-interval
.TP
.B check\-ttl
how long a service is considered healthy without being updated through the
HTTP interfave
.TP
.B id
Defaults to \-\-name
.TP
.B name
The name of this service. Defaults to __object_id
.TP
.B port
the port at which this service can be reached
.TP
.B state
if this service is \(aqpresent\(aq or \(aqabsent\(aq. Defaults to \(aqpresent\(aq.
.TP
.B tag
a tag to add to this service. Can be specified multiple times.
.UNINDENT
.SH EXAMPLES
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
__consul_service redis \e
   \-\-tag master \e
   \-\-tag production \e
   \-\-port 8000 \e
   \-\-check\-script /usr/local/bin/check_redis.py \e
   \-\-check\-interval 10s

__consul_service webapp \e
   \-\-port 80 \e
   \-\-check\-ttl 10s
.ft P
.fi
.UNINDENT
.UNINDENT
.SH SEE ALSO
.sp
\fBcdist\-type__consul_agent\fP(7)
.SH AUTHORS
.sp
Steven Armstrong <\fI\%steven\-cdist\-\-@\-\-armstrong.cc\fP>
.SH COPYING
.sp
Copyright (C) 2015 Steven Armstrong. You can redistribute it
and/or modify it under the terms of the GNU General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.
.SH COPYRIGHT
ungleich GmbH 2020
.\" Generated by docutils manpage writer.
.
