(self.webpackChunkconda_store_widget=self.webpackChunkconda_store_widget||[]).push([[667],{378:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>x}),n(4039);var l=n(7441),a=n(3390),c=n(4051),r=n(1555),o=n(151),i=n(6271),m=n.n(i),s=n(2151),u=n(3754),d=n(9798);const E=e=>m().createElement("div",null,m().createElement("h6",null," ","Please select an appropriate backend you would like to connect to:"," "),m().createElement(s.Z.Control,{as:"select"},m().createElement("option",null," ",e.serverConnectionData[0].display_name||null," ")),m().createElement(d.Z,{className:"mt-2 justify-content-end"},m().createElement(u.Z,{variant:"success",type:"submit",onClick:t=>e.handleServerSelect(t)},"Connect")," "));var h=n(4479),p=n(8050),v=n(3987);const f=e=>m().createElement(h.Z,{style:{marginTop:"2rem",marginBottom:"2rem"}},m().createElement(h.Z.Body,null,m().createElement(h.Z.Title,null,e.envInfo.name),m().createElement(h.Z.Subtitle,{className:"mb-2 text-info"},e.envInfo.namespace),m().createElement(h.Z.Text,null,e.envInfo.conda_desc||"")),m().createElement(h.Z.Footer,null,m().createElement(d.Z,{className:"mb-2 ml-5 mr-5 justify-content-between"},m().createElement(u.Z,{variant:"primary",onClick:t=>{e.handleEditEnvClick(t),e.handleBuildClick(e.envInfo.spec_sha256)}},m().createElement(v.FontAwesomeIcon,{icon:p.faEdit})," Edit")," ",m().createElement(u.Z,{variant:"outline-primary"},"Display ",m().createElement(v.FontAwesomeIcon,{icon:p.faCog}))," "),m().createElement(d.Z,{className:"mb-2 ml-5 mr-5 justify-content-between"},m().createElement(u.Z,{variant:"info",onClick:t=>e.handleInfoClick(t)},m().createElement(v.FontAwesomeIcon,{icon:p.faInfoCircle})," Info")," ",m().createElement(u.Z,{variant:"secondary",onClick:t=>e.handleImageClick(t)},m().createElement(v.FontAwesomeIcon,{icon:p.faFileArchive})," Images")," ")));var C=n(682);const Z=e=>{const[t,n]=(0,i.useState)(null),[l,a]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{(async()=>{const t=await fetch(e.url),l=await t.json();n(l),a(!0)})()}),[t]),m().createElement("div",null,m().createElement(C.Z,{fluid:"md"},m().createElement(c.Z,null,l?t.map((t=>m().createElement(r.Z,{md:6},m().createElement(f,{envInfo:t,handleBuildClick:e.handleBuildClick,handleEditEnvClick:e.handleEditEnvClick,handleInfoClick:e.handleInfoClick,handleImageClick:e.handleImageClick})))):null)))};var y=n(3888),g=n.n(y);n(2477),n(2028),n(2679);const k=e=>m().createElement(g(),{mode:"yaml",fontSize:18,theme:"solarized_light",onChange:function(e){console.log("change",e)},name:"UNIQUE_ID_OF_DIV",value:e.yaml_spec,editorProps:{},setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0}});var b=n(5147),w=n(4977),I=n.n(w);const S=e=>{const[t,n]=(0,i.useState)(null),[l,a]=(0,i.useState)(null);return(0,i.useEffect)((()=>{(async()=>{const t=await fetch(e.url+e.hash),l=await t.json();n(l),a(I().load(JSON.stringify(l.spec)))})()}),[]),(0,i.useEffect)((()=>{console.log(t)}),[t]),m().createElement("div",{style:{marginTop:"2rem"}},m().createElement(C.Z,{fluid:!0,className:"my-auto"},t?m().createElement(o.Z,null,m().createElement("h3",null," ",t.name,m().createElement("small",{className:"text-muted"},"Build Number: ",t.num_builds)),m().createElement("h6",null," Created On: ",t.created_on," "),m().createElement("h6",null," Filepath: ",t.filename," ")):null,m().createElement(c.Z,{className:"justify-content-center align-items-center"},m().createElement(r.Z,{xs:9},t?m().createElement(k,{yaml_spec:I().dump(l)}):m().createElement(k,null)),m().createElement(r.Z,{xs:3},m().createElement(b.Z,{striped:!0,bordered:!0,hover:!0},m().createElement("thead",null,m().createElement("tr",null,m().createElement("th",null,"Channels"))),m().createElement("tbody",null,t?t.spec.channels.map((e=>m().createElement("tr",null,m().createElement("td",null,e)))):null)),m().createElement(b.Z,{striped:!0,bordered:!0,hover:!0},m().createElement("thead",null,m().createElement("tr",null,m().createElement("th",null,"Installed Packages"))),m().createElement("tbody",null,t?t.spec.dependencies.map((e=>m().createElement("tr",null,m().createElement("td",null,e)))):null)))),m().createElement("div",{style:{marginTop:"1rem"}},m().createElement(c.Z,{className:"justify-content-center align-items-center"},m().createElement(u.Z,{onClick:t=>e.handleCancelClick(t),variant:"primary"}," ","Validate"," "),m().createElement(u.Z,{onClick:t=>e.handleCancelClick(t),variant:"secondary"}," ","Submit"," ")))))},_=e=>{const[t,n]=(0,i.useState)(null);return(0,i.useEffect)((()=>{(async()=>{const t=await fetch(e.url+e.build_no),l=await t.json();console.log(l),n(l)})()}),[]),m().createElement("div",{style:{marginTop:"2rem"}},m().createElement(C.Z,{fluid:!0},t?m().createElement(o.Z,null,m().createElement("h6",null," ","Build ",m().createElement("small",{className:"text-muted"},"1")),m().createElement("h6",null," Path ",t.archive_path," "),m().createElement("h6",null," Finished Building: ",t.ended_on," ")):null,m().createElement(c.Z,null,m().createElement(r.Z,null,m().createElement(b.Z,{striped:!0,bordered:!0,hover:!0},m().createElement("thead",null,m().createElement("tr",null,m().createElement("th",null,"Package"),m().createElement("th",null,"Version"))),m().createElement("tbody",null,t?t.packages.map((e=>m().createElement("tr",null,m().createElement("td",null,e.name),m().createElement("td",null,e.version)))):null))))))};var N=n(7002);const B=e=>m().createElement("div",null,m().createElement(N.Z,{show:e.show,onHide:e.handleClose},m().createElement(N.Z.Header,null,m().createElement(N.Z.Title,null,"Environment Packaged Images")),m().createElement(N.Z.Body,null,"These are images - one is an archive tarball and the other is a docker tarball. The docker image will allow you to build a copy of the environment within a new containeree to isolate."),m().createElement(N.Z.Footer,null,m().createElement(u.Z,{variant:"primary",onClick:e.handleClose},"Close")))),D=()=>{const[e,t]=(0,i.useState)(null),[n,l]=(0,i.useState)(!1),[a,s]=(0,i.useState)(!1),[u,d]=(0,i.useState)(!0),[h,p]=(0,i.useState)(!1),[v,f]=(0,i.useState)(""),C=[{display_name:"Local Filesystem",url:"http://localhost:5000/api/v1/environment/",url_specification:"http://localhost:5000/api/v1/specification/",url_build:"http://localhost:5000/api/v1/build/"},{}];return m().createElement("div",null,e?m().createElement("div",null,u?m().createElement(Z,{url:e,handleBuildClick:function(e){f(e)},handleEditEnvClick:function(e){e.preventDefault(),l(!0),d(!1)},handleInfoClick:function(e){e.preventDefault(),s(!0),d(!1)},handleImageClick:function(e){e.preventDefault(),p(!0)}}):null,n?m().createElement("div",null,m().createElement(S,{url:C[0].url_specification,hash:v,handleCancelClick:function(e){e.preventDefault(),p(!1),s(!1),l(!1),d(!0)}})):null,a?m().createElement("div",null,m().createElement(_,{url:C[0].url_build,build_no:"1"})):null,h?m().createElement("div",null,m().createElement(B,{show:h,handleClose:function(e){e.preventDefault(),p(!1)}})):null):m().createElement(c.Z,{className:"justify-content-center align-items-center",style:{height:"100vh"}},m().createElement(r.Z,{xs:4,sm:6,md:8,className:"my-auto"},m().createElement(o.Z,null,m().createElement("h1",null," Welcome to Conda-Store "),m().createElement(E,{handleServerSelect:function(e){e.preventDefault(),t(C[0].url)},serverConnectionData:C})))))};class F extends l.ReactWidget{constructor(){super(),this.addClass("jp-ReactWidget")}render(){return m().createElement("div",null,m().createElement(D,null))}}var j;!function(e){e.create="create-conda-store-widget"}(j||(j={}));const x={id:"conda-store-widget",autoStart:!0,optional:[a.ILauncher],activate:(e,t)=>{const{commands:n}=e,a=j.create;n.addCommand(a,{caption:"Launch a conda-store viewer.",label:"Conda Store Widget",icon:e=>(e.isPalette,null),execute:()=>{const t=new F,n=new l.MainAreaWidget({content:t});n.title.label="Conda Store",e.shell.add(n,"main")}}),t&&t.add({command:a})}}}}]);