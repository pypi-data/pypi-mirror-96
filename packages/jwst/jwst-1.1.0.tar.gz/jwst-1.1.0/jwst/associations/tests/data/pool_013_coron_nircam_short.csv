# Pool.Coron.NIRCam
#
# Coronographic associations
#
# OBS_NUM and AC_CANDIDATE must be computed and inserted. Other columns which also incorporate these values are not modified.
#
FILENAME|OBS_ID|PROGRAM|OBS_NUM|VISIT|VISIT_ID|VISITGRP|VISITYPE|SEQ_ID|ACT_ID|EXPOSURE|EXP_TYPE|NEXPOSUR|EXPCOUNT|INSTRUME|DETECTOR|CHANNEL|TARGETID|TARGPROP|TARGNAME|TARGTYPE|TEMPLATE|PNTGTYPE|PNTG_SEQ|TARGORDN|EXPSPCIN|DITHPTIN|MOSTILNO|MODULE|FILTER|PUPIL|DITHERID|PATTTYPE|PATTSTRT|NUMDTHPT|PATTSIZE|SUBPXPNS|PATT_NUM|SUBPXNUM|SUBPIXEL|APERNAME|SDP_VER|SUBARRAY|GRATING|FXD_SLIT|BAND|GWA_XTIL|GWA_YTIL|ASN_CANDIDATE|EXPOSERR|IS_PSF
#
# ########
# Proposal 10005
# Observations: 6
# PSF: 2
# Filters: 2 (each orientation)
# Targets: 3 (1 psf, 2 science)
#
# Initialize ACID. This is done with a dummy exposure that will not match any association
set acid|OBS_ID|PROGRAM|OBS_NUM|VISIT|VISIT_ID|VISITGRP|WFSVISIT|SEQ_ID|ACT_ID|EXPOSURE|EXP_TYPE|NEXPOSUR|EXPCOUNT|INSTRUME|DETECTOR|CHANNEL|TARGETID|TARGPROP|TARGNAME|TARGTYPE|TEMPLATE|PNTGTYPE|PNTG_SEQ|TARGORDN|EXPSPCIN|DITHPTIN|MOSTILNO|MODULE|FILTER|PUPIL|DITHERID|PATTTYPE|PATTSTRT|NUMDTHPT|PATTSIZE|SUBPXPNS|PATT_NUM|SUBPXNUM|SUBPIXEL|APERNAME|SDP_VER|SUBARRAY|GRATING|FXD_SLIT|BAND|GWA_XTIL|GWA_YTIL|@!next(acid)|EXPOSERR|IS_PSF
#
# Four PSF observations: Targets 1 and 5 in 2 orientations
jw10005007001_02102_00001_nrca2_uncal.fits|V10005007001P0000000002102|10005|@!next(obsnum)|1|10005007001|2|prime_targeted_fixed|1|02|1|NRC_CORON|1|1|NIRCAM|NRCA2|SHORT|2|DIL-LHS-1220|NULL|FIXED|NIRCam Coronagraphic Imaging|SCIENCE|2|1|1|1|1|A|F210M|MASKRND|NULL|NONE|NULL|NULL|NULL|0|0|0|NULL|NRCA2_MASK210R|2017_1|MASKA210R|NULL|NULL|NULL|NULL|NULL|@!fmt_cand([(acid.value, 'GROUP'), (acid.value + 4, 'CORONAGRAPHY'), (acid.value + 6, 'CORONAGRAPHY'), (acid.value + 10, 'GROUP'), (acid.value + 14, 'CORONAGRAPHY'), (acid.value + 16, 'CORONAGRAPHY'), (obsnum.value, 'OBSERVATION')])|NULL|TRUE
jw10005009001_02102_00001_nrcalong_uncal.fits|V10005009001P0000000002102|10005|@!next(obsnum)|1|10005009001|2|prime_targeted_fixed|1|02|1|NRC_CORON|1|1|NIRCAM|NRCALONG|LONG|2|DIL-LHS-1220|NULL|FIXED|NIRCam Coronagraphic Imaging|SCIENCE|2|1|1|1|1|A|F430M|MASKRND|NULL|NONE|NULL|NULL|NULL|0|0|0|NULL|NRCA5_MASK430R|2017_1|MASKA430R|NULL|NULL|NULL|NULL|NULL|@!fmt_cand([(acid.value + 1, 'GROUP'), (acid.value + 5, 'CORONAGRAPHY'), (acid.value + 7, 'CORONAGRAPHY'), (acid.value + 11, 'GROUP'), (acid.value + 15, 'CORONAGRAPHY'), (acid.value + 17, 'CORONAGRAPHY'), (obsnum.value, 'OBSERVATION')])|NULL|TRUE
#
#
#
# Observations on target #1, two in each orientation
jw10005004001_02102_00001_nrca2_uncal.fits|V10005004001P0000000002102|10005|@!next(obsnum)|1|10005004001|2|prime_targeted_fixed|1|02|1|NRC_CORON|1|1|NIRCAM|NRCA2|SHORT|1|DIL-HR-506|NULL|FIXED|NIRCam Coronagraphic Imaging|SCIENCE|2|1|1|1|1|A|F210M|MASKRND|NULL|NONE|NULL|NULL|NULL|0|0|0|NULL|NRCA2_MASK210R|2017_1|MASKA210R|NULL|NULL|NULL|NULL|NULL|@!fmt_cand([(acid.value, 'GROUP'), (acid.value + 2, 'GROUP'), (acid.value + 6, 'CORONAGRAPHY'), (obsnum.value, 'OBSERVATION')])|NULL|NULL
