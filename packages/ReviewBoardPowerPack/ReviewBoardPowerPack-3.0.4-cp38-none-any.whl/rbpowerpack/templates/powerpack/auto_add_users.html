{% extends "powerpack/admin_base.html" %}
{% load djblets_extensions i18n staticfiles %}


{# Page title #}
{% block page_title %}
{%  trans "Configure automatic user licensing" %}
{% endblock page_title %}


{# Form title #}
{% block form_title %}
{%  trans "Configure automatic user licensing" %}
{% endblock form_title %}


{# Pre-page scripts #}
{% block scripts %}
{{block.super}}
<script src="{% static "admin/js/core.js" %}"></script>
{%  url "admin:jsi18n" as jsi18nurl %}
<script src="{{jsi18nurl|default:"../../../jsi18n/"}}"></script>
{% endblock %}


{# Page content #}
{% block content %}
<ul id="powerpack_config_users_nav">
 <li>
  <a href="{% url 'powerpack-configure-extension' %}">
  {% trans "&lt; Configure Power Pack" %}</a>
 </li>
 <li>
  <a href="{% url 'powerpack-manage-users' %}">
  {% trans "Manage users" %}</a>
 </li>
 <li>
  <a href="{% url 'powerpack-import-users' %}">
  {% trans "Import users" %}</a>
 </li>
 <li class="current">
  {% trans "Automatic user licensing" %}
 </li>
</ul>

{{block.super}}
{% endblock content %}


{# Config form content #}
{% block form_content %}
{%  url 'powerpack-manage-users' as manage_users_url %}

<fieldset class="module aligned rb-c-form-fieldset"
          id="powerpack_auto_add">
 <div class="description">
  <p>
{%  blocktrans %}
   You can configure Power Pack to automatically add users to the license
   as they join the server or as they join one or more selected groups.
   These users will appear as "auto-added" when
   <a href="{{manage_users_url}}">managing users</a>.
{%  endblocktrans %}
  </p>
  <p>
{%  blocktrans %}
   Users will never be automatically removed from the license.
{%  endblocktrans %}
  </p>
 </div>
 <div class="form-row powerpack-auto-add-mode">
  {{form.auto_add_mode.errors}}
  {{form.auto_add_mode.label_tag}}
  {{form.auto_add_mode}}

  <div class="powerpack-auto-add-groups">
   {{form.auto_add_groups.errors}}
   {{form.auto_add_groups}}
  </div>
 </div>
</fieldset>
{% endblock %}


{# Post-page scripts #}
{% block scripts-post %}
{{block.super}}

<script>
$(document).ready(function() {
    var view = new PowerPack.Admin.AutoAddUsersView({
        el: $('#content-main')
    });
    view.render();
});
</script>
{% endblock scripts-post %}
