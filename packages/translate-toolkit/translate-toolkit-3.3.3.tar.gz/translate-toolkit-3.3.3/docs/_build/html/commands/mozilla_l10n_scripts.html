
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mozilla L10n Scripts &#8212; Translate Toolkit 3.3.3 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/bootstrap.js"></script>
    <script src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="phase" href="phase.html" />
    <link rel="prev" title="moz-l10n-builder" href="moz-l10n-builder.html" /> 
  </head><body>
  <div id="navbar" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container-fluid">
        <a class="brand" href="../index.html">Translate Toolkit</a>
        <span class="navbar-text pull-left"><b>3.3.3</b></span>
          <ul class="nav">
            <li class="divider-vertical"></li>
            
              <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Converters</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#tools">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#scripts">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/index.html">Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../formats/index.html">Supported formats</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developers/styleguide.html">Translate Styleguide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/styleguide.html#documentation">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/building.html">Building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/testing.html#command-line-functional-testing">Command Line Functional Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/developers.html">Translate Toolkit Developers Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/releasing.html">Making a Translate Toolkit Release</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/deprecation.html">Deprecation of Features</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../history.html">History of the Translate Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API</a></li>
</ul>
</ul>
</li>
              
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">Mozilla L10n Scripts</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#build-ff3-1-langs-sh">build_ff3.1_langs.sh</a><ul>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#usage">Usage</a></li>
</ul>
</li>
<li><a class="reference internal" href="#build-tb3-langs-sh">build_tb3_langs.sh</a></li>
<li><a class="reference internal" href="#buildxpi-py">buildxpi.py</a><ul>
<li><a class="reference internal" href="#buildxpi-py-description">Description</a></li>
<li><a class="reference internal" href="#buildxpi-py-usage">Usage</a></li>
</ul>
</li>
<li><a class="reference internal" href="#get-moz-enus-py">get_moz_enUS.py</a><ul>
<li><a class="reference internal" href="#get-moz-enus-py-description">Description</a></li>
<li><a class="reference internal" href="#get-moz-enus-py-usage">Usage</a></li>
</ul>
</li>
<li><a class="reference internal" href="#moz-l10n-builder">moz-l10n-builder</a></li>
<li><a class="reference internal" href="#moz-l10n-builder-py">moz_l10n_builder.py</a></li>
</ul>
</li>
</ul>
</ul>
</li>
            
            
              
  <li><a href="moz-l10n-builder.html"
         title="previous chapter">&laquo; moz-l10n-builder</a></li>
  <li><a href="phase.html"
         title="next chapter">phase &raquo;</a></li>
            
          </ul>
          <ul class="nav pull-right">
            
              
  <li><a href="../_sources/commands/mozilla_l10n_scripts.rst.txt"
	  rel="nofollow"><i class="icon-file"></i> Source</a></li>
            
          
            
<form class="navbar-search pull-right" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
          </ul>
        </div>
      </div>
    </div>
  </div>

<div class="container content">
   
  <div class="section" id="mozilla-l10n-scripts">
<span id="id1"></span><h1>Mozilla L10n Scripts<a class="headerlink" href="#mozilla-l10n-scripts" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<span id="mozilla-l10n-scripts-introduction"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This page describes the purpose and usage of scripts available in the Translate
Toolkit specifically for making the translation of Mozilla products easier.</p>
<p>Mozilla’s move from CVS to Mercurial made a lot of these scripts necessary. For
more information about Mozilla l10n from CVS, see the <a class="reference internal" href="moz-l10n-builder.html"><span class="doc">moz-l10n-builder</span></a>
page.</p>
<p>All of these scripts are available on Subversion from <a class="reference external" href="https://github.com/translate/translate/tree/master/tools/mozilla">here</a>.</p>
<p>We are currently generating POT files for most major betas, RCs and releases of
Firefox and Thunderbird. They are available here:
<a class="reference external" href="http://l10n.mozilla.org/pootle/pot/">http://l10n.mozilla.org/pootle/pot/</a></p>
<p>As a start you might want to just use these POT files and gradually learn more
about the processes described below. Contact us for more help on using these.</p>
</div>
<div class="section" id="requirements">
<span id="mozilla-l10n-scripts-requirements"></span><h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The <a class="reference internal" href="../index.html"><span class="doc">Translate Toolkit</span></a> (&gt;=1.3)</p></li>
<li><p>All scripts in the <code class="docutils literal notranslate"><span class="pre">tools/mozilla</span></code> directory (from the project sources)
should be executable and in your <code class="docutils literal notranslate"><span class="pre">PATH</span></code>.</p></li>
</ul>
</div>
<div class="section" id="build-ff3-1-langs-sh">
<span id="id2"></span><h2>build_ff3.1_langs.sh<a class="headerlink" href="#build-ff3-1-langs-sh" title="Permalink to this headline">¶</a></h2>
<div class="section" id="description">
<span id="build-ff3-1-langs-sh-description"></span><h3>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h3>
<p>This is a simple bash script that embodies most of the Mozilla l10n process and
does the following:</p>
<ol class="arabic simple">
<li><p>Update Mozilla sources</p></li>
<li><p>Update language files from <a class="reference external" href="http://hg.mozilla.org/l10n-central">Mozilla’s L10n</a> Mercurial repository.</p></li>
<li><p>Replace old l10n en-US files with a fresh copy from the updated source tree.</p></li>
<li><p><a class="reference internal" href="../guides/creating_mozilla_pot_files.html"><span class="doc">Create new POT files</span></a> from the
<a class="reference internal" href="#get-moz-enus-py"><span class="std std-ref">en-US</span></a> l10n files.</p></li>
<li><p>Create archives of the POT files.</p></li>
<li><p>For each language:</p>
<ol class="arabic simple">
<li><p>Update existing PO files if the checked out from a CVS, Subversion or
Mercurial repository.</p></li>
<li><p><a class="reference internal" href="../guides/migrating_translations.html"><span class="doc">Migrate</span></a> PO files to new POT
files.</p></li>
<li><p><a class="reference internal" href="moz2po.html"><span class="doc">Create Mozilla l10n files</span></a> for the language based on the
migrated PO files.</p></li>
<li><p>Create archives of the PO files.</p></li>
<li><p><a class="reference internal" href="#buildxpi-py"><span class="std std-ref">Build langpack</span></a> for the
language.</p></li>
</ol>
</li>
</ol>
<p>This script is used on the l10n.mozilla.org server to create most (if not all)
of the files available from <a class="reference external" href="http://l10n.mozilla.org/pootle/">http://l10n.mozilla.org/pootle/</a>. It was originally
written as a stable way to provide these files and as such making it as general
as possible was not the biggest requirement. This is evident in the script’s
very narrow focus.</p>
</div>
<div class="section" id="usage">
<span id="build-ff3-1-langs-sh-usage"></span><h3>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<p>This script takes no command-line parameters and is only configurable via the
variables at the top and, failing that, custom hacking of the script.</p>
<p>The variables are used in the following ways:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 27%" />
<col style="width: 73%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">BUILD_DIR</span></code></p></td>
<td><p>The base build directory from where building is done.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">MOZCENTRAL_DIR</span></code></p></td>
<td><p>The directory containing a checkout of the Mozilla
source tree <a class="reference external" href="http://hg.mozilla.org/mozilla-central/">http://hg.mozilla.org/mozilla-central/</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">HG_LANGS</span></code></p></td>
<td><p>A space-separated list of language codes to build
for.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">L10N_DIR</span></code></p></td>
<td><p>The directory where Mozilla l10n files
(from l10n-central) should be collected.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PO_DIR</span></code></p></td>
<td><p>The directory containing the externally-hosted or
previously available source PO files (e.g. PO files
managed in another VCS repository). It contains a
sub-directory for each language.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">POPACK_DIR</span></code></p></td>
<td><p>The output directory for PO archives.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PORECOVER_DIR</span></code></p></td>
<td><p>The directory to put recovered PO files in. It
contains a sub-directory for each language.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">POT_INCLUDES</span></code></p></td>
<td><p>A space-separated list of files to be included in POT
archives.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">POTPACK_DIR</span></code></p></td>
<td><p>The output directory for POT archives.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">POUPDATED_DIR</span></code></p></td>
<td><p>The directory to use for updated PO files. It
contains a sub-directory for each language.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">LANGPACK_DIR</span></code></p></td>
<td><p>The directory to put langpacks (XPIs) in.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">FF_VERSION</span></code></p></td>
<td><p>The version of Firefox that is being built for. This
is used in the file names of archives.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is <strong>strongly</strong> recommended that you mirror the directory
structure specified by the default values of the <code class="docutils literal notranslate"><span class="pre">*_DIR</span></code> variables. For
example the default value for <code class="docutils literal notranslate"><span class="pre">L10N_DIR</span></code> is <code class="docutils literal notranslate"><span class="pre">${BUILD_DIR}/l10n</span></code>, then
you should put your l10n-central check-outs in the <code class="docutils literal notranslate"><span class="pre">l10n</span></code> directory under
your main build directory (<code class="docutils literal notranslate"><span class="pre">BUILD_DIR</span></code>).</p>
<p>Basically, you should have an ideally separate build directory containing
the following sub-directories: <code class="docutils literal notranslate"><span class="pre">l10n</span></code>, <code class="docutils literal notranslate"><span class="pre">mozilla-central</span></code>, <code class="docutils literal notranslate"><span class="pre">po</span></code>,
<code class="docutils literal notranslate"><span class="pre">popacks</span></code>, <code class="docutils literal notranslate"><span class="pre">potpacks</span></code>, <code class="docutils literal notranslate"><span class="pre">po-updated</span></code> and <code class="docutils literal notranslate"><span class="pre">xpi</span></code> (if used). This way
the only variable that need to be changed is <code class="docutils literal notranslate"><span class="pre">BUILD_DIR</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="build-tb3-langs-sh">
<span id="id3"></span><h2>build_tb3_langs.sh<a class="headerlink" href="#build-tb3-langs-sh" title="Permalink to this headline">¶</a></h2>
<p>This is the script that the <code class="docutils literal notranslate"><span class="pre">build_ff3.1_langs.sh</span></code> script above was actually
adapted from. It is 90% similar with the obvious exception that it is aimed at
building Thunderbird 3.0 packages in stead of Firefox 3.1. Also note that this
script uses the comm-central repository in stead of mozilla-central.</p>
</div>
<div class="section" id="buildxpi-py">
<span id="id4"></span><h2>buildxpi.py<a class="headerlink" href="#buildxpi-py" title="Permalink to this headline">¶</a></h2>
<div class="section" id="buildxpi-py-description">
<span id="id5"></span><h3>Description<a class="headerlink" href="#buildxpi-py-description" title="Permalink to this headline">¶</a></h3>
<p>Creates XPI language packs from Mozilla sources and translated l10n files. This
script has only been tested with Firefox 3.1 beta sources.</p>
<p>It is basically the scripted version of the process described on Mozilla’s
<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Creating_a_Language_Pack">“Creating a language pack”</a> page.</p>
<p>This script is used by <code class="docutils literal notranslate"><span class="pre">build_ff3.1_langs.sh</span></code> to build language packs in its
final step.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This script uses the <code class="docutils literal notranslate"><span class="pre">.mozconfig</span></code> file in your home directory. Any
existing <code class="docutils literal notranslate"><span class="pre">.mozconfig</span></code> is renamed to <code class="docutils literal notranslate"><span class="pre">.mozconfig.bak</span></code> during operation
and copied back afterwards.</p>
</div>
</div>
<div class="section" id="buildxpi-py-usage">
<span id="id6"></span><h3>Usage<a class="headerlink" href="#buildxpi-py-usage" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">buildxpi</span><span class="o">.</span><span class="n">py</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">options</span><span class="o">&gt;</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">lang</span><span class="o">&gt;</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">lang2</span><span class="o">&gt;</span> <span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">buildxpi</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">L</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">l10n</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">mozilla</span><span class="o">-</span><span class="n">central</span> <span class="o">-</span><span class="n">o</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">xpi_output</span> <span class="n">af</span> <span class="n">ar</span>
</pre></div>
</div>
<p>Options:</p>
<dl class="option-list">
<dt><kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></dt>
<dd><p>show this help message and exit</p>
</dd>
<dt><kbd><span class="option">-L <var>L10NBASE</var></span>, <span class="option">--l10n-base=<var>L10NBASE</var></span></kbd></dt>
<dd><p>The directory containing the &lt;lang&gt; subdirectory.</p>
</dd>
<dt><kbd><span class="option">-o <var>OUTPUTDIR</var></span>, <span class="option">--output-dir=<var>OUTPUTDIR</var></span></kbd></dt>
<dd><p>The directory to copy the built XPI to (default:
current directory).</p>
</dd>
<dt><kbd><span class="option">-p <var>MOZPRODUCT</var></span>, <span class="option">--mozproduct=<var>MOZPRODUCT</var></span></kbd></dt>
<dd><p>The Mozilla product name (default: “browser”).</p>
</dd>
<dt><kbd><span class="option">-s <var>SRCDIR</var></span>, <span class="option">--src=<var>SRCDIR</var></span></kbd></dt>
<dd><p>The directory containing the Mozilla l10n sources.</p>
</dd>
<dt><kbd><span class="option">-d</span>, <span class="option">--delete-dest</span></kbd></dt>
<dd><p>Delete output XPI if it already exists.</p>
</dd>
<dt><kbd><span class="option">-v</span>, <span class="option">--verbose</span></kbd></dt>
<dd><p>Be more noisy</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="get-moz-enus-py">
<span id="id7"></span><h2>get_moz_enUS.py<a class="headerlink" href="#get-moz-enus-py" title="Permalink to this headline">¶</a></h2>
<div class="section" id="get-moz-enus-py-description">
<span id="id8"></span><h3>Description<a class="headerlink" href="#get-moz-enus-py-description" title="Permalink to this headline">¶</a></h3>
<p>A simple script to collect the en-US l10n files from a Mozilla source tree
(<code class="docutils literal notranslate"><span class="pre">'comm-central</span></code>’ or <code class="docutils literal notranslate"><span class="pre">'mozilla-central</span></code>’) by traversing the product’s
<code class="docutils literal notranslate"><span class="pre">l10n.ini</span></code> file.</p>
</div>
<div class="section" id="get-moz-enus-py-usage">
<span id="id9"></span><h3>Usage<a class="headerlink" href="#get-moz-enus-py-usage" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">get_moz_enUS</span><span class="o">.</span><span class="n">py</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span>
</pre></div>
</div>
<p>Options:</p>
<dl class="option-list">
<dt><kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></dt>
<dd><p>show this help message and exit</p>
</dd>
<dt><kbd><span class="option">-s <var>SRCDIR</var></span>, <span class="option">--src=<var>SRCDIR</var></span></kbd></dt>
<dd><p>The directory containing the Mozilla l10n sources.</p>
</dd>
<dt><kbd><span class="option">-d <var>DESTDIR</var></span>, <span class="option">--dest=<var>DESTDIR</var></span></kbd></dt>
<dd><p>The destination directory to copy the en-US locale
files to.</p>
</dd>
<dt><kbd><span class="option">-p <var>MOZPRODUCT</var></span>, <span class="option">--mozproduct=<var>MOZPRODUCT</var></span></kbd></dt>
<dd><p>The Mozilla product name.</p>
</dd>
<dt><kbd><span class="option">--delete-dest</span></kbd></dt>
<dd><p>Delete the destination directory (if it exists).</p>
</dd>
<dt><kbd><span class="option">-v</span>, <span class="option">--verbose</span></kbd></dt>
<dd><p>Be more noisy</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="moz-l10n-builder">
<span id="moz-l10n-builder-deprecated"></span><h2>moz-l10n-builder<a class="headerlink" href="#moz-l10n-builder" title="Permalink to this headline">¶</a></h2>
<p>This is the pre-Mercurial build script originally written by Dwayne Bailey.
This is the script that all the others on this page replaces for post-CVS
Mozilla l10n.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This script is <strong>not</strong> applicable to the l10n process of any Mozilla products after the move to Mercurial.</p>
</div>
<p>For more information about this script see its <a class="reference internal" href="moz-l10n-builder.html"><span class="doc">dedicated page</span></a>.</p>
</div>
<div class="section" id="moz-l10n-builder-py">
<span id="id10"></span><h2>moz_l10n_builder.py<a class="headerlink" href="#moz-l10n-builder-py" title="Permalink to this headline">¶</a></h2>
<p>This script was intended to be a simple and direct port of the
<code class="docutils literal notranslate"><span class="pre">moz-l10n-builder</span></code> script from above. It has pro’s and cons in comparison to
the original, but is very similar for the most part. So for more information
about this script, see the original script’s <a class="reference internal" href="moz-l10n-builder.html"><span class="doc">page</span></a>.</p>
</div>
</div>


</div>
<hr>

<footer class="footer">
  <div class="container">
    <p class="pull-right"><a href="#">Back to top ↑</a></p>
    <ul class="unstyled muted">
      <li><small>
        &copy; 2002-2021, Translate.<br/>
      </small></li>
      <li><small>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 3.5.1.
      </small></li>
    </ul>
  </div>
</footer>
  </body>
</html>