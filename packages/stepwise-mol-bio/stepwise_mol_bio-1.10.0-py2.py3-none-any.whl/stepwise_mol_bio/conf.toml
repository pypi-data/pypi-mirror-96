[pcr]
primer_stock_uM = 100
default_preset = 'q5'

[pcr.presets.q5]
brief = "Official protocol for Q5 High-Fidelity DNA Polymerase (NEB)."
reagents = '''
Reagent            Stock      Volume  MM?
==============  ========  ==========  ===
water                     to 5.00 µL  yes
template DNA    20 pg/µL     0.50 µL
forward primer     10 µM     0.25 µL
reverse primer     10 µM     0.25 µL
Q5 master mix         2x     2.50 µL  yes
'''
num_cycles = 35
initial_denature_temp_C = 98
initial_denature_time_s = 30
denature_temp_C = 98
denature_time_s = 10
anneal_temp_C = 60
anneal_time_s = 20
extend_temp_C = 72
extend_time_s_per_kb = 30
final_extend_temp_C = 72
final_extend_time_s = 120
hold_temp_C = 4
footnote = 'https://tinyurl.com/y27ralt4'

[pcr.presets.ssoadv]
brief = "Official protocol for qPCR with SsoAdvanced™ Universal SYBR® Green Supermix (BioRad)."
reagents = '''
Reagent                  Stock    Volume  MM?
====================  ========  ========  ===
water                           to 20 µL  yes
template DNA                        1 µL
forward primer           10 µM      1 µL
reverse primer           10 µM      1 µL
SsoAdvanced supermix        2x     10 µL  yes
'''
num_cycles = 40
initial_denature_temp_C = 95
initial_denature_time_s = 30
denature_temp_C = 95
denature_time_s = 10
anneal_temp_C = 60
anneal_time_s = 15
extend_time_func = 'lambda n: 10 if n <= 100 else (30 if n <= 250 else 60)'
melt_curve_low_temp_C = 65
melt_curve_high_temp_C = 95
melt_curve_temp_step_C = 0.5
melt_curve_time_step_s = 5
two_step = true
qpcr = true
footnote = 'https://tinyurl.com/y4qffgss'

[qpcr]
default_preset = 'ssoadv'

[gel.presets.bolt]
brief = "Bolt SDS PAGE (Invitrogen)"
title = "SDS PAGE"
gel_type = "Bolt Bis-Tris SDS PAGE"
gel_percent = "4−12"
gel_buffer = "Bolt MES SDS running buffer"
sample_mix = """
Reagent                     Stock      Volume  MM?
======================  =========  ==========  ===
water                              to 10.0 µL  yes
Bolt LDS sample buffer         4x      2.5 µL  yes
Bolt reducing agent           10x      1.0 µL  yes
sample                  100 ng/µL      2.5 µL
"""
incubate_temp_C = 70
incubate_time_min = 10
load_volume_uL = 10
run_volts = 165
run_time_min = 42
stain = "coomassie"

[gel.presets.boltmax]
brief = "Bolt SDS PAGE (Invitrogen) without diluting the sample"
inherit = 'bolt'
sample_mix = """
Reagent                 Stock    Volume  MM?
======================  =====  ========  ===
Bolt LDS sample buffer     4x   3.85 µL  yes
Bolt reducing agent       10x   1.54 µL  yes
sample                         10.00 µL
"""
load_volume_uL = 15.39

[gel.presets.native]
brief = "Native PAGE"
title = "native PAGE"
gel_type = "Bis-Tris Novex NativePAGE"
gel_percent = "3−12"
gel_buffer = "NativePAGE running buffer"
sample_mix = """
Reagent             Stock      Volume  MM?
==============  =========  ==========  ===
water                      to 6.00 µL  yes
sample buffer          4x     1.50 µL  yes
sample                        1.25 µL
"""
load_volume_uL = 5
run_volts = 150
run_time_min = 115
stain = "coomassie"

[gel.presets.nativeblue]
brief = "Native PAGE with Coomassie"
inherit = "native"
gel_buffer = "light blue cathode buffer"
sample_mix = """
Reagent             Stock      Volume  MM?
==============  =========  ==========  ===
water                      to 6.00 µL  yes
sample buffer          4x     1.50 µL  yes
G-250 additive         5%     0.25 µL  yes
sample                        1.25 µL
"""

[gel.presets.urea]
brief = "TBE/urea PAGE"
title = "TBE/urea PAGE"
gel_type = "TBE/urea PAGE"
gel_percent = 6
gel_buffer = "1x TBE"
sample_mix = """
Reagent             Stock    Volume  MM?
==============  =========  ========  ===
water                      to 10 µL  yes
sample buffer          2x      5 µL  yes
sample          200 ng/µL      1 µL
"""
incubate_temp_C = 70
incubate_time_min = 3
load_volume_uL = 10
run_volts = 180
run_time_min = 40
stain = "gelred"

[gel.presets.agarose1]
brief = "1.0% agarose"
gel_type = "agarose/TAE"
gel_percent = 1
gel_buffer = "1x TAE"
sample_mix = """
Reagent             Stock  Volume  MM?
==============  =========  ======  ===
loading buffer         6x    1 µL  yes
sample                       5 µL
"""
load_volume_uL = 5
run_volts = 100
run_time_min = 60
stain = ''

[gel.presets.agarose15]
brief = "1.5% agarose"
inherit = 'agarose1'
gel_percent = 1.5

[gel.presets.agarose2]
brief = "2.0% agarose"
inherit = 'agarose1'
gel_percent = 2

[laser.presets.blue]
laser = 488
filter = '518BP22'

[laser.presets.green]
laser = 520
filter = '565BP24'

[laser.presets.red]
laser = 658
filter = '710BP40'

[laser.presets.nir]
laser = 784
filter = '832BP37'

[ethanol_precipitation]
preset = 'plasmid'

[ivtt]
default_preset = 'purexpress'

[ivtt.presets.purexpress]
kit = "PURExpress (NEB E6800)"

# DNA:
# - Control DHFR plasmid: 2727 bp, MW=1.69e6 Da
# - NEB recommends 250 ng for 25 µL reaction
# - 250 ng / 25 µL = 6 nM
#
# mRNA:
# - Control DHFR mRNA: 740 nt, MW=241564 Da
# - NEB recommends 1–5 µg mRNA for 25 µL reaction
# - 3 µg / 25 µL = 500 nM
#
# RNase inhibitor:
# - The PURExpress manual recommends 0.8 U/µL (20 U per 25 µL reaction).
# - The product page for the inhibitor itself recommends 1 U/µL.  
# - I'm using the former here because it's the recommendation I encountered 
#   first, and it seems to work fine.
#   
# PURExpress manual: https://tinyurl.com/dxapyo69
# RNAse inhibitor FAQs: https://tinyurl.com/y3zabsoz

reaction = '''
Reagent                        Catalog #  Flags      Stock      Volume  MM?
=============================  =========  =====  =========  ==========  ===
water                                                       to 25.0 µL   +
solution A                                                     10.0 µL   +
solution B                                                      7.5 µL   +
RNase inhibitor, murine        NEB M0314  rnase    40 U/µL      0.5 µL   +
DNA                                                  75 nM      2.0 µL   -
mRNA                                               5000 nM      2.5 µL   -
'''
volume_uL = 10
setup_instructions = [
  "Thaw all components on ice.",
  "Mix A well; certain components may precipitate during storage.",
  "Mix B gently; do not vortex.",
  "Add A before B.",
]
setup_footnote = "https://tinyurl.com/dxapyo69"
incubation_time = '2–4 h'
incubation_temp_C = 37

[ivtt.presets.nebexpress]
kit = "NEBExpress (NEB E5360)"

# DNA:
# - Control DHFR plasmid: 2727 bp, MW=1.69e6 Da
# - NEB recommends 250 ng for 50 µL reaction
# - 250 ng / 50 µL = 3 nM
#
# mRNA:
# - Control DHFR mRNA: 740 nt, MW=241564 Da
# - NEB recommends 1–5 µg mRNA for 50 µL reaction
# - 3 µg / 50 µL = 250 nM

reaction = '''
Reagent                        Catalog #  Flags      Stock      Volume  MM?
=============================  =========  =====  =========  ==========  ===
water                                                       to 50.0 µL   +
S30 extract                    NEB P0864                       12.0 µL   +
synthesis buffer               NEB B0864                2x     25.0 µL   +
T7 RNA polymerase              NEB M1019  dna     450 U/µL      1.0 µL   +
RNase inhibitor, murine        NEB M1018  rnase    40 U/µL      1.0 µL   +
GamS nuclease inhibitor        NEB P0774  dna    1.5 µg/µL      1.0 µL   +
DNA                                                  75 nM      2.0 µL   -
mRNA                                               5000 nM      2.5 µL   -
'''
volume_uL = 10
setup_instructions = [
  "Thaw all components on ice.",
  "Gently vortex the S30 extract and the synthesis buffer before use.",
  "Add template after nuclease inhibitors."
]
setup_footnote = '''
https://tinyurl.com/3e8tlw36
'''
incubation_time = '2–4 h'
incubation_temp_C = 37
incubation_footnote = '''
Additional incubation time (maximum 10 hours) at 37°C may increase yield.
'''

[ivtt.presets.purefrex]
kit = "PUREfrex 2.0 (GeneFrontier PF201)"

# DNA:
# - GeneFrontier recommends 2 nM.
#
# mRNA:
# - GeneFrontier recommends 100-1000 nM.
# - Picking 200 nM
#   - About ≈3x less than PURExpress recommendation.
#   - Same proportion as DNA template.

reaction = '''
Reagent                        Catalog #  Flags      Stock      Volume  MM?
=============================  =========  =====  =========  ==========  ===
water                                                       to 20.0 µL   +
solution I                                                     10.0 µL   +
solution II                                                     1.0 µL   +
solution III                                                    2.0 µL   +
DNA                                                  75 nM      0.5 µL   -
mRNA                                               5000 nM      0.8 µL   -
'''
volume_uL = 10

setup_instructions = [
  "Thaw solution I at 25–37°C for 1 min, then keep on ice.",
  "Thaw solutions II and III on ice.",
  "Vortex all thawed solutions before use.",
]
setup_footnote = '''
https://tinyurl.com/ml26pu09
'''
incubation_time = '2–6 h'
incubation_temp_C = 37

[ivtt.presets.'promega/s30/linear']
kit = "S30 (Promega L1030)"

# DNA:
# - Promega recommends:
#   - Control template: 8 µL for 50 µL reaction, 4 µg
#   - Any template: not more than 4 µg
# - Control template:
#   - 500 ng/µL
#   - 4486 bp
#   - MW ≈ 607.4 * 4486 + 157.9 = 2724954.3 Da
# - 4000 ng / 50 µL = 30 nM
#
# mRNA:
# - Promega recommends 10–100 μg
# - Control template:
#   - HindIII/XhoI fragment is 1807 nt
#   - MW ≈ 302.5 * 1807 + 159.0 = 546776.5 Da
# - 30 µg / 50 µL = 1000 nM

reaction = '''
Reagent                        Catalog #  Flags      Stock      Volume  MM?
=============================  =========  =====  =========  ==========  ===
water                                                       to 50.0 µL   +
complete amino acid mixture                                     5.0 µL   +
S30 premix                                                     20.0 µL   +
S30 extract, linear                                            15.0 µL   +
DNA                                                 200 nM      7.5 µL   -
mRNA                                              10000 nM      5.0 µL   -
'''
volume_uL = 5
setup_instructions = [
  "Gently mix all thawed components before use.",
]
setup_footnote = '''
https://tinyurl.com/2bvzhpdz

The activity of the S30 system may be inhibited by NaCl (≥50mM), glycerol 
(≥1%), or by very small amounts of magnesium or potassium salts.  Precipitate 
the DNA template with sodium acetate rather than ammonium acetate.
'''
incubation_time = '1–2 h'
incubation_temp_C = 37
incubation_footnote = '''
Enhanced expression at lower temperatures for longer times appears to be 
gene/protein-specific and may be tested if the standard reaction at 37°C for 1 
hour does not produce the desired results.
'''
