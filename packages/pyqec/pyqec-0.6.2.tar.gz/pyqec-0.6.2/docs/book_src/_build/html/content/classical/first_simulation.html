
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Your first simulation &#8212; The pyqec library</title>
    
  <link rel="stylesheet" href="../../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Let’s get some practice" href="pratice.html" />
    <link rel="prev" title="Review of basic concepts" href="basic.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../index.html">
  
  <img src="../../_static/logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">The pyqec library</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   The pyqec library
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Classical error correction
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="basic.html">
   Review of basic concepts
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Your first simulation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="pratice.html">
   Let’s get some practice
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="solution.html">
   Solution
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        <a class="dropdown-buttons"
            href="../../_sources/content/classical/first_simulation.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download notebook file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/content/classical/first_simulation.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/maxtremblay/pyqec"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/maxtremblay/pyqec/issues/new?title=Issue%20on%20page%20%2Fcontent/classical/first_simulation.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/maxtremblay/pyqec/main?urlpath=tree/docs/content/classical/first_simulation.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-hamming-code">
   The Hamming code
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-decoder">
   The decoder
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#building-the-experiment">
   Building the experiment
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#running-many-experiments">
   Running many experiments
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#visualization">
   Visualization
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="your-first-simulation">
<h1>Your first simulation<a class="headerlink" href="#your-first-simulation" title="Permalink to this headline">¶</a></h1>
<p>To follow this section,
you should create a new python file
with the following imports.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyqec.sparse</span> <span class="kn">import</span> <span class="n">BinaryMatrix</span><span class="p">,</span> <span class="n">BinaryVector</span>
<span class="kn">from</span> <span class="nn">pyqec.classical</span> <span class="kn">import</span> <span class="n">LinearCode</span><span class="p">,</span> <span class="n">BinarySymmetricChannel</span>
<span class="kn">from</span> <span class="nn">pyqec.experiments</span> <span class="kn">import</span> <span class="n">ClassicalDecodingExperiment</span><span class="p">,</span> <span class="n">Laboratory</span>
</pre></div>
</div>
</div>
</div>
<p>I strongly suggest that you try to follow along and to run
the code snippets.</p>
<div class="section" id="the-hamming-code">
<h2>The Hamming code<a class="headerlink" href="#the-hamming-code" title="Permalink to this headline">¶</a></h2>
<p>One of the simplest linear code is the Hamming code
defined from the parity check matrix</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{align*}
    H = 
    \begin{pmatrix}
        0 &amp; 0 &amp; 0 &amp; 1 &amp; 1 &amp; 1 &amp; 1 \\
        0 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 1 &amp; 1 \\
        1 &amp; 0 &amp; 1 &amp; 0 &amp; 1 &amp; 0 &amp; 1 
    \end{pmatrix}.
\end{align*}\]</div>
<p>A simple way to remember this matrix is that
each column is the binary representation of its position
when starting to count from 1 and not 0.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">pyqec</span></code> library is optimized to represent sparse linear codes.
These are linear codes with a parity check matrix with a relatively
small number of 1s.
The Hamming code is not a sparse code,
but since it is really small,
performances are not an issue.</p>
</div>
<p>To construct this matrix,
we specify the number of columns and
the <strong>sorted</strong> positions of the 1s in each row.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">parity_check_matrix</span> <span class="o">=</span> <span class="n">BinaryMatrix</span><span class="p">(</span>
    <span class="mi">7</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>From this parity check matrix,
we can instantiate the corresponding linear code.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hamming_code</span> <span class="o">=</span> <span class="n">LinearCode</span><span class="p">(</span>
    <span class="n">parity_check_matrix</span><span class="p">,</span> 
    <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;Hamming code&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>We gave the code a tag.
This is useful to distinguish codes
when we run many simulations with different codes.</p>
</div>
<p>We could also define a linear code from a generator matrix.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">some_code</span> <span class="o">=</span> <span class="n">LinearCode</span><span class="p">(</span><span class="n">generator_matrix</span><span class="o">=</span><span class="n">some_matrix</span><span class="p">)</span>
</pre></div>
</div>
<p>We can even specify both matrices if they are orthogonal (\( H\cdot G^T = 0 \)).
If one matrix is omitted,
it will be computed from the other.
If neither a parity check matrix
nor a generator matrix is given,
an empty code is constructed.
This is not really useful for correcting errors,
but could be used as a place holder since it allocated
a minimal amount of memory.</p>
</div>
<div class="section" id="the-decoder">
<h2>The decoder<a class="headerlink" href="#the-decoder" title="Permalink to this headline">¶</a></h2>
<p>An interesting property of the Hamming code
is that for any binary vector the syndrome
tells us which bit to flip to map it to the closest codeword.</p>
<p>For example,
1110000 is a codeword of the Hamming code.
As expected,
it has a syndrome of 000.
If we flip the fifth bit we obtain the vector 1110100
with syndrome 101.
The number 101 is the binary representation of the number 5.
Thus,
we know that we need to flip the fifth bit to recover the original codeword.
You can verify that this works if you start from a different codeword as well.
The codeword 1010101 for example.
We can use this trick to construct a decoder.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This decoder can only correct a single error and will fail if
there are more errors.
There are no decoder for the Hamming code that can correct
two errors.</p>
</div>
<p>To define a classical decoder to use with <code class="docutils literal notranslate"><span class="pre">pyqec</span></code>,
we need to define a class with the <code class="docutils literal notranslate"><span class="pre">decoder</span></code> method,
taking a binary vector usually called a message as single argument
and returning a codeword.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">HammingDecoder</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">code</span>

    <span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="n">syndrome</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">syndrome_of</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="n">bit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bit_to_flip</span><span class="p">(</span><span class="n">syndrome</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">bit</span><span class="p">:</span>
            <span class="c1"># To flip the bit, we addition a vector with a single</span>
            <span class="c1"># 1 at the corresponding position.</span>
            <span class="k">return</span> <span class="n">message</span> <span class="o">+</span> <span class="n">BinaryVector</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="p">[</span><span class="n">bit</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># It is already a codeword.</span>
            <span class="k">return</span> <span class="n">message</span>

    <span class="k">def</span> <span class="nf">bit_to_flip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">syndrome</span><span class="p">):</span>
        <span class="n">bit_to_flip</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">unsatisfied_position</span> <span class="ow">in</span> <span class="n">syndrome</span><span class="p">:</span>
            <span class="c1"># The smallest position correspond </span>
            <span class="c1"># to the highest power of 2.</span>
            <span class="n">bit_to_flip</span> <span class="o">+=</span> <span class="mi">2</span><span class="o">**</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">syndrome</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">unsatisfied_position</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">bit_to_flip</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># We offset because binary vector are 0-indexed.</span>
            <span class="k">return</span> <span class="n">bit_to_flip</span> <span class="o">-</span> <span class="mi">1</span> 
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># There is no bit to flip</span>
            <span class="k">return</span> <span class="kc">None</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s analyze this.
In the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method,
we pass a code to initialize the decoder.
We could have hardcoded the Hamming code in the decoder,
but there exists an infinite amount of parity check matrices
that we could use with this decoder.
So we should keep this freedom.</p>
<p>Then, we should take a look at the <code class="docutils literal notranslate"><span class="pre">bit_to_flip</span></code> method.
This method is returning the position of the bit to flip
or <code class="docutils literal notranslate"><span class="pre">None</span></code> if there is no bit to flip.
It uses the <code class="docutils literal notranslate"><span class="pre">non_trival_positions</span></code> method of <code class="docutils literal notranslate"><span class="pre">BinaryVector</span></code>.
This method allows us to iterate over all positions where the syndrome is 1
in increasing order.</p>
<p>Finally,
the <code class="docutils literal notranslate"><span class="pre">decode</span></code> method starts by computing the syndrome
before using the <code class="docutils literal notranslate"><span class="pre">bit_to_flip</span></code> method
to find the correction.
If there is a bit to flip,
we create a new vector with a single one at the position
of the bit to flip
and we add it to the <code class="docutils literal notranslate"><span class="pre">message</span></code>.
However,
if there is no bit to flip,
we simply return the input.</p>
<p>From this point, it is easy to instantiate
the decoder.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">decoder</span> <span class="o">=</span> <span class="n">HammingDecoder</span><span class="p">(</span><span class="n">hamming_code</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="building-the-experiment">
<h2>Building the experiment<a class="headerlink" href="#building-the-experiment" title="Permalink to this headline">¶</a></h2>
<p>We would like to obtain a plot of the failure rate
as a function of the error probability using
binary symmetric channels.</p>
<p>To create a binary symmetric channel,
we only need to specify the error probability.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">noise</span> <span class="o">=</span> <span class="n">BinarySymmetricChannel</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is possible to specify a seed for the random
number generator as the second parameter.</p>
</div>
<p>The simplest way to simulate the performances of a classical decoder
is to use the <code class="docutils literal notranslate"><span class="pre">ClassicalDecodingExperiment</span></code> class.
A single simulation involve generating a random codeword,
then applying random noise on this codeword
and finally decoding it with the decoder.
We can estimate the failure rate
by running many simulation and
counting the number of time the decoder fails.
The <code class="docutils literal notranslate"><span class="pre">ClassicalDecodingExperiment</span></code> class take care
of all that.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">experiment</span> <span class="o">=</span> <span class="n">ClassicalDecodingExperiment</span><span class="p">(</span><span class="n">hamming_code</span><span class="p">,</span> <span class="n">decoder</span><span class="p">,</span> <span class="n">noise</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">experiment</span><span class="o">.</span><span class="n">run_n_times</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Statistics
----------
sample size: 1000
failure rate: 0.618
success rate: 0.382
uncertainty: 0.01536476488593301
</pre></div>
</div>
</div>
</div>
<p>Since we want to say the change in failure rate for different probabilities,
we should create a function to rapidly create a new experiment.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">build_experiment</span><span class="p">(</span><span class="n">probability</span><span class="p">):</span>
    <span class="n">noise</span> <span class="o">=</span> <span class="n">BinarySymmetricChannel</span><span class="p">(</span><span class="n">probability</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ClassicalDecodingExperiment</span><span class="p">(</span><span class="n">hamming_code</span><span class="p">,</span> <span class="n">decoder</span><span class="p">,</span> <span class="n">noise</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="running-many-experiments">
<h2>Running many experiments<a class="headerlink" href="#running-many-experiments" title="Permalink to this headline">¶</a></h2>
<p>One way to run many experiments is to use a bunch of for loops.
But, we aren’t that barbaric.
Instead,
we are going to use the <code class="docutils literal notranslate"><span class="pre">Laboratory</span></code> class.
This allows us to group many experiments together before running them.
Of course,
if you have access to many CPUs,
you can run many experiments in parallel.
By now,
you should be eager to instantiate your first laboratory
and to add a few experiments to it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">laboratory</span> <span class="o">=</span> <span class="n">Laboratory</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="c1"># There are 8 CPUs on my personal computer.</span>

<span class="k">for</span> <span class="n">probability</span> <span class="ow">in</span> <span class="p">(</span><span class="mf">0.05</span> <span class="o">*</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">21</span><span class="p">)):</span>
    <span class="n">laboratory</span><span class="o">.</span><span class="n">add_experiment</span><span class="p">(</span><span class="n">build_experiment</span><span class="p">(</span><span class="n">probability</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p>It is almost as easy to obtain the results of all the experiments in the laboratory.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">laboratory</span><span class="o">.</span><span class="n">run_all_experiments_n_times</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="visualization">
<h2>Visualization<a class="headerlink" href="#visualization" title="Permalink to this headline">¶</a></h2>
<p>As if laboratory where not cool enough already,
we can generate simple plots from the results they generate.
In the backend,
this is done with <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>,
but you don’t even need to import it.</p>
<p>The most common plot is to have the failure rate as a function of the physical error rate
along with the uncertainties of course.
What if I tell you that you can do this plot with a single extra line of code?
Would you believe that?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/first_simulation_21_0.png" src="../../_images/first_simulation_21_0.png" />
</div>
</div>
<p>You worked hard to get this nice figure.
It would be great to save it.
To do so,
just specify the destination path as an argument to the <code class="docutils literal notranslate"><span class="pre">plot</span></code> method.</p>
<p>Also,
have you noticed the legend in the figure?
This is the tag we specified earlier.
To each tag will corresponds one curve in the final plot.
You can use this if you want to compare the performances
of many codes.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./content/classical"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="basic.html" title="previous page">Review of basic concepts</a>
    <a class='right-next' id="next-link" href="pratice.html" title="next page">Let’s get some practice</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Maxime Tremblay<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../../_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>